CREATE TABLE branch(branch_name VARCHAR(30),branch_city VARCHAR(20),assets REAL,PRIMARY KEY(branch_name));
DESC branch
INSERT INTO branch VALUES('SBI-chamarajpet','banglore',50000);
INSERT INTO branch VALUES('SBI-residencyroad','banglore',10000);
INSERT INTO branch VALUES('SBI-shivajiroad','bombay',20000);
INSERT INTO branch VALUES('SBI-parlimentroad','delhi',10000);
INSERT INTO branch VALUES('SBI-jantarmanar','delhi',20000);
SELECT *FROM branch;
CREATE TABLE accounts(acctno INT,branch_name VARCHAR(20),balance REAL,PRIMARY KEY(acctno),FOREIGN KEY(branch_name)REFERENCES branch(branch_name));
INSERT INTO accounts VALUES(1,'SBI-chamarajpet',2000);
INSERT INTO accounts VALUES(2,'SBI-residencyroad',5000);
INSERT INTO accounts VALUES(3,'SBI-shivajiroad',6000);
INSERT INTO accounts VALUES(4,'SBI-parlimentroad',9000);
INSERT INTO accounts VALUES(5,'SBI-jantarmanar',8000);
INSERT INTO accounts VALUES(6,'SBI-shivajiroad',4000);
INSERT INTO accounts VALUES(8,'SBI-residencyroad',4000);
INSERT INTO accounts VALUES(9,'SBI-parlimentroad',3000);
INSERT INTO accounts VALUES(10,'SBI-residencyroad',5000);
INSERT INTO accounts VALUES(11,'SBI-jantarmanar',2000);
SELECT *FROM accounts;
CREATE TABLE depositor(customer_name VARCHAR(20),customer_street VARCHAR(20),customer_city VARCHAR(20),PRIMARY KEY(customer_name));
INSERT INTO depositor VALUES('avinash','gs road','banglore');
INSERT INTO depositor VALUES('dinesh','mg road','banglore');
INSERT INTO depositor VALUES('mohan','jp road','banglore');
INSERT INTO depositor VALUES('nikil','kp road','delhi');
INSERT INTO depositor VALUES('ravi','ab road','delhi');
SELECT *FROM depositor;
CREATE TABLE borrower(customer_name VARCHAR(30),acctno INT,PRIMARY KEY(customer_name,acctno),FOREIGN KEY(customer_name)REFERENCES depositor(customer_name),FOREIGN KEY(acctno)REFERENCES accounts(acctno));
INSERT INTO  borrower VALUES('avinash',1);
INSERT INTO  borrower VALUES('dinesh',2);
INSERT INTO  borrower VALUES('nikil',4);
INSERT INTO  borrower VALUES('ravi',5);
INSERT INTO  borrower VALUES('avinash',8);
INSERT INTO  borrower VALUES('nikil',9);
INSERT INTO  borrower VALUES('dinesh',10);
INSERT INTO  borrower VALUES('nikil',11);
SELECT *FROM  borrower;
CREATE TABLE loans(loan_number INT,branch_name VARCHAR(30),amount REAL,PRIMARY KEY(loan_number),FOREIGN KEY(branch_name)REFERENCES branch(branch_name));
INSERT INTO loans VALUES(1,'SBI-chamarajpet',1000);
INSERT INTO loans VALUES(2,'SBI-residencyroad',2000);
INSERT INTO loans VALUES(3,'SBI-shivajiroad',3000);
INSERT INTO loans VALUES(4,'SBI-parlimentroad',4000);
INSERT INTO loans VALUES(5,'SBI-jantarmanar',5000);
SELECT *FROM accounts;
SELECT *FROM depositor;
SELECT *FROM branch;
SELECT *FROM borrower;
SELECT *FROM loans;
SELECT c.customer_name FROM depositor c WHERE EXISTS(SELECT d.customer_name,COUNT(d.customer_name) FROM borrower d,accounts a WHERE d.acctno=a.acctno AND c.customer_name=d.customer_name AND a.branch_name='SBI-residencyroad' GROUP BY d.customer_name HAVING COUNT(d.customer_name)>=2);
SELECT d.customer_name FROM borrower d,branch b,accounts a WHERE b.branch_name=a.branch_name AND a.acctno=d.acctno AND branch_city='delhi' GROUP BY d.customer_name HAVING COUNT(DISTINCT b.branch_name)=(SELECT COUNT(branch_name)FROM branch WHERE branch_city='delhi');
DELETE FROM accounts WHERE branch_name IN(SELECT branch_name FROM branch WHERE branch_city='bombay');
SELECT *FROM accounts;
