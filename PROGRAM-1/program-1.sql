CREATE TABLE person (driver_id VARCHAR(10),NAME VARCHAR(20),address VARCHAR(30),PRIMARY KEY(driver_id));
INSERT INTO person VALUES('B10','chandra','vasanth Nagar');
INSERT INTO person VALUES('B20','kamal','sri nagar');
INSERT INTO person VALUES('B30','rashi','chikpet');
INSERT INTO person VALUES('B40','karan','shanthi nagar');
INSERT INTO person VALUES('B50','vasha','bangalore');
INSERT INTO person VALUES('B60','kamal','kolar');
SELECT *FROM person;
CREATE TABLE car(reg_num VARCHAR(10),model VARCHAR(10),YEAR INT,PRIMARY KEY(reg_num));
INSERT INTO car VALUES('KA0374','benz',1947);
INSERT INTO car VALUES('KA9543','audi',1950);
INSERT INTO car VALUES('KA1782','ferari',1975);
INSERT INTO car VALUES('KA7498','maruthi suziki',1960);
INSERT INTO car VALUES('KA0010','honda toyota',1995);
INSERT INTO car VALUES('KA9342','toyota',1998);
SELECT *FROM car;
CREATE TABLE accident(report_num INT,accident_date DATE,location VARCHAR(20),PRIMARY KEY(report_num));
INSERT INTO accident VALUES(92,'2019-11-11','kr puram');
INSERT INTO accident VALUES(12,'2019-11-11','kr puram');
INSERT INTO accident VALUES(95,'2018-05-10','tinfactory');
INSERT INTO accident VALUES(99,'2008-1-19','halsur');
INSERT INTO accident VALUES(100,'2019-02-22','devanahalli');
INSERT INTO accident VALUES(177,'2019-07-27','hosakote');
SELECT *FROM accident;
CREATE TABLE owns(driver_id VARCHAR(10),reg_num VARCHAR(10),PRIMARY KEY(driver_id,reg_num),FOREIGN KEY(driver_id) REFERENCES person(driver_id),FOREIGN KEY(reg_num) REFERENCES car(reg_num));
INSERT INTO owns VALUES('B10','KA0374');
INSERT INTO owns VALUES('B20','KA9543');
INSERT INTO owns VALUES('B30','KA1782');
INSERT INTO owns VALUES('B40','KA7498');
INSERT INTO owns VALUES('B50','KA0010');
INSERT INTO owns VALUES('B60','KA9342');
SELECT *FROM owns;
CREATE TABLE participated(driver_id VARCHAR(10),reg_num VARCHAR(10),report_num INT, damage_amount INT,PRIMARY KEY(driver_id,reg_num,report_num),
FOREIGN KEY(driver_id) REFERENCES person(driver_id),FOREIGN KEY(reg_num) REFERENCES car(reg_num), FOREIGN KEY(report_num) REFERENCES accident(report_num));
INSERT INTO participated VALUES('B10','KA0374',92,12000);
INSERT INTO participated VALUES('B20','KA9543',95,95000);
INSERT INTO participated VALUES('B30','KA1782',99,99070);
INSERT INTO participated VALUES('B40','KA7498',101,75800);
INSERT INTO participated VALUES('B50','KA0010',177,23700);
INSERT INTO participated VALUES('B60','KA9342',12,29700);
SELECT *FROM participated;
UPDATE participated SET damage_amount=25000 WHERE report_num=12 AND reg_num='KA9342';
INSERT INTO accident VALUES(123,'2007-10-27','mandya');
SELECT COUNT(DISTINCT driver_id)val FROM participated p, accident a WHERE p.report_num=a.report_num AND a.accident_date LIKE '%08%';
SELECT COUNT(report_num) val FROM car c,participated p WHERE c.reg_num=p.reg_num AND model='toyota';